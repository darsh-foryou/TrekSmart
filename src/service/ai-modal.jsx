import {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
} from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a travel itenary for the destination: {ldelhi} for {3} days in the month of {march} \n  Traveler type: {2 people}, with a {luxury} budget. \n\nFirst, add a impressive,funny, descriptive description paragraph about delhi.\n\nThen give me the weather of delhi in the month of march, including:\n\nTemperature in celsius and emoji based in the temperature(☀️/☁️/🌧️/❄️)\n\nHumidity (💧 %)\n\nMax Temperature (🌡️ °C)\n\nMin Temperature (🌡️ °C)\n\nFeels like (🌡️ °C)\n\nSea Level (🗺️ hPa)\n\nThen provide 5 top activities to look out for (\"Activity-name\" : \"Activity-place\")\n\nThen provide 3 luxury hotel recommendations with:\n\nHotel name 🏨\n\nHotel address 📍\n\nHotel average price per person 💵\n\nHotel image URL 🖼️\n\nGeocoding (Latitude & Longitude) 🗺️\n\nRating ⭐\n\nReason why suggesting that hotel 📝\n\nThen give me 5 top places to visit with:\n\nName of the place 🏞️\n\nDescription of the place 📝\n\nImage URL 🖼️\n\nGeocoding (Latitude & Longitude) 🗺️\n\nThen create a detailed itinerary as:\n\nDay 0:\n\nMorning:\n\nAfternoon:\n\nEvening:\n\nNight: (Include specific visiting times when visiting any of the suggested places.)\n\nThen give me the top 5 best local cuisines with:\n\nThe dish 🍽️\n\nThe best hotel/restaurant serving that cuisine 🍴\n\nHotel/restaurant address 📍\n\nReason why it's the best 📝\n\nThen give me one travel tip ✈️\n\nThen give me 5 packing tips based on the climate of delhi in march, with relevant emojis (🌡️❄️☔🧥 etc.)\n\nFinally, provide the overall travel expense for 2 people for 2 days (🧾) with an estimate.\n\nOutput format:Respond in JSON format \ndescription : ... \nweather: ...\ntopActivities: ...\ntopPlacesToVisit: ...\nhotel-recommendation: ... \nitinerary: ...\nLocalCuisine: ...\ntravelTip: ...\npackingTips: ...\noverallTravelExpense: ...\nwith all the above information. Add emojis wherever necessary to make it more descriptive."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"description\": \"Delhi, a city so chaotic it makes a Bollywood dance-off look like a synchronized swimming routine! Prepare to be bombarded by a kaleidoscope of sights, sounds, and smells that will either leave you utterly bewildered or completely enchanted. From ancient monuments whispering tales of emperors and empires to bustling bazaars overflowing with everything you never knew you needed, Delhi is a sensory overload in the best possible way. Just remember to hold on tight, bargain hard, and maybe invest in a good pair of noise-canceling headphones – you're in for a wild ride!\",\n  \"weather\": {\n    \"temperature\": \"☀️ Mild and pleasant\",\n    \"humidity\": \"💧 50-60%\",\n    \"maxTemperature\": \"🌡️ 30°C\",\n    \"minTemperature\": \"🌡️ 15°C\",\n    \"feelsLike\": \"🌡️ 28°C\",\n    \"seaLevel\": \"🗺️ 1015 hPa\"\n  },\n  \"topActivities\": {\n    \"1\": {\n      \"Activity-name\": \"Explore Old Delhi's street food\",\n      \"Activity-place\": \"Chandni Chowk\"\n    },\n    \"2\": {\n      \"Activity-name\": \"Visit historical monuments\",\n      \"Activity-place\": \"Qutub Minar, Humayun's Tomb\"\n    },\n    \"3\": {\n      \"Activity-name\": \"Shop for handicrafts and textiles\",\n      \"Activity-place\": \"Dilli Haat\"\n    },\n    \"4\": {\n      \"Activity-name\": \"Attend a cultural performance\",\n      \"Activity-place\": \"Kamani Auditorium, Siri Fort Auditorium\"\n    },\n    \"5\": {\n      \"Activity-name\": \"Take a cooking class\",\n      \"Activity-place\": \"Multiple locations offer cooking classes\"\n    }\n  },\n  \"hotel-recommendation\": [\n    {\n      \"Hotel name 🏨\": \"The Leela Palace New Delhi\",\n      \"Hotel address 📍\": \"Chanakyapuri, New Delhi, Delhi 110021\",\n      \"Hotel average price per person 💵\": \"₹15,000 - ₹25,000\",\n      \"Hotel image URL 🖼️\": \"https://www.theleela.com/content/dam/theleela/new-delhi/overview/TLND_Facade.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.5848° N, 77.1890° E\",\n      \"Rating ⭐\": \"5/5\",\n      \"Reason why suggesting that hotel 📝\": \"Opulent interiors, impeccable service, and award-winning restaurants make it a top choice for luxury travelers.\"\n    },\n    {\n      \"Hotel name 🏨\": \"The Oberoi, New Delhi\",\n      \"Hotel address 📍\": \"Dr. Zakir Hussain Marg, New Delhi, Delhi 110003\",\n      \"Hotel average price per person 💵\": \"₹18,000 - ₹30,000\",\n      \"Hotel image URL 🖼️\": \"https://www.oberoihotels.com/oberoi_newdelhi/images/newdelhi-large.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.6001° N, 77.2358° E\",\n      \"Rating ⭐\": \"5/5\",\n      \"Reason why suggesting that hotel 📝\": \"Known for its elegant design, luxurious amenities, and exceptional hospitality. Recently renovated.\"\n    },\n    {\n      \"Hotel name 🏨\": \"Taj Palace, New Delhi\",\n      \"Hotel address 📍\": \"Sardar Patel Marg, Diplomatic Enclave, New Delhi, Delhi 110021\",\n      \"Hotel average price per person 💵\": \"₹12,000 - ₹20,000\",\n      \"Hotel image URL 🖼️\": \"https://www.tajhotels.com/content/dam/tajhotels/hotels/asia/india/new-delhi/taj-palace/images/facade-new.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.5941° N, 77.1702° E\",\n      \"Rating ⭐\": \"5/5\",\n      \"Reason why suggesting that hotel 📝\": \"A grand hotel with lush gardens, a wide range of dining options, and a relaxing spa.\"\n    }\n  ],\n  \"topPlacesToVisit\": [\n    {\n      \"Name of the place 🏞️\": \"Qutub Minar\",\n      \"Description of the place 📝\": \"A UNESCO World Heritage Site, this towering minaret is a stunning example of Indo-Islamic architecture.\",\n      \"Image URL 🖼️\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Qutub_Minar_New_Delhi_India.jpg/1200px-Qutub_Minar_New_Delhi_India.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.5245° N, 77.1856° E\"\n    },\n    {\n      \"Name of the place 🏞️\": \"Humayun's Tomb\",\n      \"Description of the place 📝\": \"A precursor to the Taj Mahal, this magnificent tomb is a beautiful example of Mughal architecture.\",\n      \"Image URL 🖼️\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Humayun%27s_tomb_new_delhi_india.jpg/1200px-Humayun%27s_tomb_new_delhi_india.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.5931° N, 77.2507° E\"\n    },\n    {\n      \"Name of the place 🏞️\": \"India Gate\",\n      \"Description of the place 📝\": \"A war memorial dedicated to Indian soldiers who died in World War I. An iconic landmark.\",\n      \"Image URL 🖼️\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/India_Gate_Delhi.JPG/1280px-India_Gate_Delhi.JPG\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.6129° N, 77.2295° E\"\n    },\n    {\n      \"Name of the place 🏞️\": \"Red Fort\",\n      \"Description of the place 📝\": \"A historic fort built by Mughal emperor Shah Jahan. A UNESCO World Heritage Site.\",\n      \"Image URL 🖼️\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Red_Fort_Delhi_India_Front.jpg/1280px-Red_Fort_Delhi_India_Front.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.6562° N, 77.2399° E\"\n    },\n    {\n      \"Name of the place 🏞️\": \"Lotus Temple\",\n      \"Description of the place 📝\": \"A Baháʼí House of Worship known for its distinctive lotus flower-like shape.\",\n      \"Image URL 🖼️\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Lotus_Temple_at_night_New_Delhi.jpg/1280px-Lotus_Temple_at_night_New_Delhi.jpg\",\n      \"Geocoding (Latitude & Longitude) 🗺️\": \"28.5535° N, 77.2588° E\"\n    }\n  ],\n  \"itinerary\": {\n    \"Day 1\": {\n      \"Morning\": \"Arrive in Delhi and check into The Leela Palace New Delhi. Relax and enjoy the hotel's amenities.\",\n      \"Afternoon\": \"Visit Humayun's Tomb (12:00 PM - 2:00 PM). Explore the beautiful Mughal architecture and gardens.\",\n      \"Evening\": \"Enjoy high tea at The Imperial Hotel, followed by shopping at Khan Market.\",\n      \"Night\": \"Fine dining experience at Indian Accent, known for its innovative Indian cuisine.\"\n    },\n    \"Day 2\": {\n      \"Morning\": \"Visit Qutub Minar (9:00 AM - 11:00 AM). Explore the historical complex and marvel at the towering minaret.\",\n      \"Afternoon\": \"Explore Old Delhi. Take a rickshaw ride through Chandni Chowk and sample street food.\",\n      \"Evening\": \"Attend a classical Indian music performance at Kamani Auditorium.\",\n      \"Night\": \"Enjoy dinner at Bukhara, ITC Maurya, renowned for its North-West Frontier cuisine.\"\n    },\n    \"Day 3\": {\n      \"Morning\": \"Visit Red Fort (9:00 AM - 11:00 AM). Explore the historic fort and learn about its significance.\",\n      \"Afternoon\": \"Visit Lotus Temple (2:00 PM - 4:00 PM). Admire the unique architecture and enjoy the peaceful atmosphere.\",\n      \"Evening\": \"Relaxing spa treatment at your hotel.\",\n      \"Night\": \"Farewell dinner at Megu, The Leela Palace, known for its exquisite Japanese cuisine.\"\n    }\n  },\n  \"LocalCuisine\": [\n    {\n      \"The dish 🍽️\": \"Butter Chicken\",\n      \"The best hotel/restaurant serving that cuisine 🍴\": \"Moti Mahal Delux\",\n      \"Hotel/restaurant address 📍\": \"3704, Netaji Subhash Marg, Daryaganj, New Delhi, Delhi 110002\",\n      \"Reason why it's the best 📝\": \"The inventors of butter chicken, Moti Mahal, still serve one of the best renditions of this classic dish.\"\n    },\n    {\n      \"The dish 🍽️\": \"Biryani\",\n      \"The best hotel/restaurant serving that cuisine 🍴\": \"Deewan-e-Aam\",\n      \"Hotel/restaurant address 📍\": \"Shop No. 58, 1st Floor, Main Market, Defence Colony, New Delhi, Delhi 110024\",\n      \"Reason why it's the best 📝\": \"Located in Defence Colony known for the most authentic biryani.\"\n    },\n    {\n      \"The dish 🍽️\": \"Chole Bhature\",\n      \"The best hotel/restaurant serving that cuisine 🍴\": \"Sita Ram Diwan Chand\",\n      \"Hotel/restaurant address 📍\": \"2243, Chuna Mandi, Paharganj, New Delhi, Delhi 110055\",\n      \"Reason why it's the best 📝\": \"A legendary spot in Paharganj, serving the quintessential Delhi breakfast.\"\n    },\n    {\n      \"The dish 🍽️\": \"Kebabs\",\n      \"The best hotel/restaurant serving that cuisine 🍴\": \"Al Kakori Al Kauser\",\n      \"Hotel/restaurant address 📍\": \"R K Puram, Behind HDFC Bank, New Delhi\",\n      \"Reason why it's the best 📝\": \"Known for Kakori Kebabs and other meat delights.\"\n    },\n    {\n      \"The dish 🍽️\": \"Daal Makhani\",\n      \"The best hotel/restaurant serving that cuisine 🍴\": \"Bukhara, ITC Maurya\",\n      \"Hotel/restaurant address 📍\": \"ITC Maurya, Diplomatic Enclave, Sardar Patel Marg, New Delhi, Delhi 110021\",\n      \"Reason why it's the best 📝\": \"Arguably the best Daal Makhani in the world, cooked overnight in a traditional tandoor.\"\n    }\n  ],\n  \"travelTip\": \"Bargain aggressively when shopping in local markets. It's expected and can save you a significant amount of money. Keep small denomination bills for easier transactions.\",\n  \"packingTips\": [\n    \"Light cotton clothing 👕: March is warm, so pack breathable fabrics.\",\n    \"Sunglasses 😎: Protect your eyes from the sun.\",\n    \"Sunscreen 🧴: Essential for sun protection.\",\n    \"Comfortable walking shoes 👟: You'll be doing a lot of walking!\",\n    \"Light scarf or shawl 🧣: Useful for covering your head in religious sites or protecting yourself from dust.\"\n  ],\n  \"overallTravelExpense\": {\n    \"flights\": \"₹50,000 - ₹80,000\",\n    \"hotel\": \"₹72,000 - ₹180,000 (for 3 nights)\",\n    \"food\": \"₹30,000 - ₹50,000\",\n    \"activities_and_transportation\": \"₹20,000 - ₹30,000\",\n    \"miscellaneous\": \"₹10,000\",\n    \"total\": \"₹182,000 - ₹350,000\"\n  }\n}\n```"},
          ],
        },
      ],
    });